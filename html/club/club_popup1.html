<!DOCTYPE html>
<html lang="ko-KR">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover" />
<meta http-equiv="X-UA-compatible" content="IE=edge">

<meta http-equiv="subject" content="" />
<meta http-equiv="title" content="" />
<meta http-equiv="author" content="" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta property="og:type" content="website">
<meta property="og:title" content="">
<meta property="og:description" content="">
<meta property="og:image" content="">
<meta property="og:url" content="">

<link rel="stylesheet" type="text/css" href="../../assets/css/plugin/swiper.min.css">
<link rel="stylesheet" type="text/css" href="../../assets/css/common.css">
<link rel="stylesheet" type="text/css" href="../../assets/css/style.css">
<script type="text/javascript" src="../../assets/js/plugin/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="../../assets/js/plugin/swiper.min.js"></script>
<script type="text/javascript" src="../../assets/js/common.js"></script>
<title>smartpin_manager</title>

</head>
<body>
    <div class="wrap">
        <!-- pop1 -->
        <div class="popup-wrap" id="pop1" style="display: block;">
            <div class="popup-frame">
                <div class="inner">
                    <button type="button" class="btn-close" onclick="popupCloseFn();"></button>
                    <p class="tag">핀 히스토리</p>
                    <div class="search-form">
                        <div class="inp-con date-con">
                            <div class="inp">
                                <label for="inp13" class="inp-label blind">날짜 선택</label>
                                <div class="inp-area">
                                    <div class="inp-group cal">
                                        <button type="button" class="btn-cal"></button>
                                        <input type="text" placeholder="날짜를 선택하세요.">
                                    </div>
                                    <span class="dash">~</span>
                                    <div class="inp-group cal">
                                        <button type="button" class="btn-cal"></button>
                                        <input type="text" placeholder="날짜를 선택하세요.">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ul class="data-list">
                            <li class="active"><a href="#!">하루</a></li>
                            <li><a href="#!">1주일</a></li>
                            <li><a href="#!">1개월</a></li>
                            <li><a href="#!">3개월</a></li>
                            <li><a href="#!">6개월</a></li>
                            <li><a href="#!">1년</a></li>
                        </ul>
                    </div>
                    <div class="course-con">
                        <div class="course-item type2">
                            <div class="course-img">
                                <div class="img-con">
                                    <canvas data-pin="200, 200, 100, 180" width="388" height="388"></canvas>
                                </div>
                                <ul class="percent">
                                    <li data-per="52"><span>52%</span></li>
                                    <li data-per="21"><span>21%</span></li>
                                    <li data-per="10"><span>10%</span></li>
                                    <li data-per="35"><span>35%</span></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- // pop1 -->
    </div>

    <script>
        let canvas = document.querySelectorAll('.course-item canvas');
    
        canvas.forEach(function(el){
            let context = el.getContext("2d");
            let dataPin = el.getAttribute('data-pin');
            let dataDot = el.getAttribute('data-dot');
    
            const bgCourse = new Image();
            const pinRed = new Image();
            const pinGray = new Image();
            const pinDot = new Image();
    
            bgCourse.src= "../../assets/img/content/course_round.svg";
            pinRed.src= "../../assets/img/content/pin_red.svg";
            pinGray.src= "../../assets/img/content/pin_gray.svg";
            pinDot.src= "../../assets/img/content/pin_dot.svg";
    
            bgCourse.onload = function(){
                context.drawImage(bgCourse, 0, 0,  el.width, el.height);
    
                if(dataPin){
                    dataPin = dataPin.split(',');
                    pinRed.onload = function(){
                        context.drawImage(pinRed, dataPin[0] || 0, dataPin[1] || 0, 24, 39);
                    }
                    pinGray.onload = function(){
                        context.drawImage(pinGray, dataPin[2] || 0, dataPin[3] || 0, 26, 69);
                    }
                }
                if(dataDot){
                    dataDot = dataDot.split(',');
                    pinDot.onload = function(){
                        context.drawImage(pinDot, dataDot[0] || 0, dataDot[1] || 0, 24, 24);
                    }
                }
            }
        });
    </script>

</body>
</html>
